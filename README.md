# Retail-Market-Basket-Analysis-and-customer-churn-prediction
The project's goal is to solve the problem that many retail giants like Wallmart, Marks &amp; Spencer, Sobeys, Canadian Tire and et al face. Market analysis through apriori algorithm is performed to find product association and then customer churn prediction is done to provide customers lucaritive incentives that will drive the retail sales.

### About Dataset

The Online Retail dataset encompasses all transactions conducted by a UK-based online retail business registered between December 1, 2009, and December 9, 2011. The company specializes in the sale of distinctive all-occasion gift-ware. Notably, a significant portion of the customer base comprises wholesalers.

<br>Attribute Information:
<br>InvoiceNo: Invoice number. Nominal. A 6-digit integral number uniquely assigned to each transaction. If this code starts with the letter 'c', it indicates a cancellation.
<br>StockCode: Product (item) code. Nominal. A 5-digit integral number uniquely assigned to each distinct product.
<br>Description: Product (item) name. Nominal.
<br>Quantity: The quantities of each product (item) per transaction. Numeric.
<br>InvoiceDate: Invice date and time. Numeric. The day and time when a transaction was generated.
<br>UnitPrice: Unit price. Numeric. Product price per unit in sterling (Â£).
<br>CustomerID: Customer number. Nominal. A 5-digit integral number uniquely assigned to each customer.
<br>Country: Country name. Nominal. The name of the country where a customer resides.

<br>Source:
<br>Dr. Daqing Chen, Course Director: MSc Data Science. chend '@' lsbu.ac.uk, School of Engineering, London South Bank University, London SE1 0AA, UK.

<br>Please find more information refer the below link,
<br>https://archive.ics.uci.edu/ml/datasets/Online+Retail+II

### Data Cleaning
* The granularity of data is based on unique transaction and product combination. 
* The dataset consists of 541909 records.
* The number of duplicate and null records are 5225 and 136534 respectively. The number of records after removing null and duplicates is 400150.
* The purpose for this analysis is to understand customer buying behaviour and based on that we could establish product association rules and targeted marketing strategies.
<br>For this reason it is required to filter out any records that represent product returned or refund from customer.Thus it required to drop records where Quantity<0 and Unit Price <=0. After filtering out such records there are total 392692 records in the dataset.
* Apart from that the product description for few product items is not uniform. The variation in product description is handled by imputation.
* Lastly, the data ranges from 1/12/2010 to 8/12/2011. In order to accurately uncover seasonal trends, the 8 records for month of december 2011 is dropped.

### Exploratory Data Analysis (EDA)
* The seasonal trends of number of orders placed and revenue generated by the store is shown below. Number of orders placed is the highest in November and then drops in December. One probable inference is that people buy christmas gifts in November. During December the store remain closed for 2 weeks because of christmas break. 
  <br>![image](https://github.com/neelpdesai/Retail-Market-Basket-Analysis-and-Customer-Churn-Prediction/assets/137664550/0a345288-1d7b-46bf-989b-a39ed507c035)
* The weekly trend shows that the peak revenue occurs on Thrusday.
  <br>![image](https://github.com/neelpdesai/Retail-Market-Basket-Analysis-and-Customer-Churn-Prediction/assets/137664550/f84afc9d-e18c-4578-88c1-5711d22a1734)

<br> These crutial trends help store in inventory planning and reducing lost sales.
* The geographic distribution of sales show that store earnings of 81.4% is contributed from domestic sales of goods.
  <br>![image](https://github.com/neelpdesai/Retail-Market-Basket-Analysis-and-Customer-Churn-Prediction/assets/137664550/a913e6ab-9b09-40ae-bac3-2f38f16a75f5)
* The top 20 highest revenue generating items are responsible for about 12.96% of revenue of the store. It is atmost important for the store to carryout proper pricing analytics for this items and always keep this items in stock. 
  <br>![image](https://github.com/neelpdesai/Retail-Market-Basket-Analysis-and-Customer-Churn-Prediction/assets/137664550/1577daea-acf5-49ed-94fb-4867b1aa80e6)

### Market Basket Analysis
Market Basket Analysis, often employed in retail and e-commerce, is a technique used to identify associations and patterns in customer purchasing behavior. The Apriori Algorithm is a widely used method in this analysis. It operates by identifying frequent itemsets, which are combinations of items frequently bought together.
<br>   ![image](https://github.com/neelpdesai/Retail-Market-Basket-Analysis-and-Customer-Churn-Prediction/assets/137664550/01d0e972-2a5b-4725-841d-953deaa0d59e)


<br>The algorithm establishes a set of rules, particularly association rules, which indicate the likelihood of one product being purchased when another is. Key metrics such as support, confidence, and lift are used to evaluate the strength of these rules. Support measures the frequency of occurrence of itemsets, confidence gauges the likelihood of buying a consequent item given the purchase of an antecedent item, and lift indicates how much more likely the purchase of the consequent item is when compared to random chance. Please find below the defination of these key metrics:

* Support measures the proportion of transactions in a dataset that contain a particular itemset.
  Support(X) = Transactions containing X / Total transactions

* Confidence measures the probability of the occurrence of a consequent item given the presence of an antecedent item in a transaction.
  Confidence(X -> Y) = Support(X ∪ Y) / Support(X)

* Lift indicates the degree to which the occurrence of a consequent item is dependent on the presence of an antecedent item, compared to the scenario where there is no dependency.
  Lift(X -> Y) = Confidence(X -> Y) / Support(Y)

<br>In these equations:

<br>X and Y represent sets of items (itemsets). ∪ denotes the union of sets. Support(X ∪ Y) is the support of the combined itemset X ∪ Y. Support(X) is the support of itemset X. Support(Y) is the support of itemset Y.

<br>If the rule had a lift of 1, it would imply that the probability of occurrence of the antecedent and that of the consequent are independent of each other. When two events are independent of each other, no rule can be drawn involving those two events. If the lift is > 1, that lets us know the degree to which those two occurrences are dependent on one another, and makes those rules potentially useful for predicting the consequent in future data sets. If the lift is < 1, that lets us know the items are substitute to each other. This means that presence of one item has negative effect on presence of other item and vice versa.

<br>In essence, Market Basket Analysis with the Apriori Algorithm provides valuable insights into product relationships, enabling businesses to make informed decisions about product placement, promotions, and personalized recommendations. This strategic utilization of data can significantly enhance the customer shopping experience and contribute to increased sales and revenue.

<br>The results of the Market Basket Analysis reveal strong connections between items. Given that our business is an e-commerce platform, leveraging these associations during a customer's online shopping experience is strongly advised. Recommending consequent items when a customer purchases an antecedent item can significantly increase the likelihood of selling additional products, leading to a substantial boost in revenue for our online store.
<br> ![image](https://github.com/neelpdesai/Retail-Market-Basket-Analysis-and-Customer-Churn-Prediction/assets/137664550/757a808c-8b8d-4e8e-966b-6b5a5c310a7c)

### Customer Churn Analysis
RFM Analysis (Recency, Frequency, Monetary) is a customer segmentation technique commonly used in retail and e-commerce to understand and categorize customers based on their purchasing behavior. Here's a summary explanation:

* Recency (R): This refers to how recently a customer has made a purchase. It's a measure of the time since the last transaction. Customers who have made a purchase more recently are considered more valuable.

* Frequency (F): This measures how often a customer makes a purchase. It is the total number of transactions within a specific time period. Customers with a higher frequency are often more engaged and loyal.

* Monetary (M): This represents the total monetary value of a customer's purchases. It's a measure of the total amount spent by a customer within a specific time frame. Customers with higher monetary values are 
                typically high spenders

New features can be formed from RFM feature that possesses numerical categorical value. This feature will further help in segmenting customer to analyse their churn.
For example Recency_Bucket feature is formed by categorizing Recency feature into 4 quantile groups. The people having lesser Recency value are alloted value 4 while people who bought a considerable time ago are allocated value 2 or 1.
Similarly Frequency_Bucket and Monetary_Bucket is formed.

OverallScore is obtained by adding Receny_Bucket, Frequency_Bucket and Monetary_Bucket. The higher the OverallScore, the more valuable customer is to the business. For example overall score from 9 to 12 represent a customer group that recently bought item from store and have a behaviour of buying frequently and spending more at the store.

Based on Overall Score, customers are segmented into 4 groups: Bronze, Silver, Gold and Platinum

<br> ![image](https://github.com/neelpdesai/Retail-Market-Basket-Analysis-and-Customer-Churn-Prediction/assets/137664550/bb9522a5-bd56-4ac8-b2b7-a6dcfe9be6c8)

* Customers in the Platinum group hold significant value for our business. They exhibit high frequency and monetary spending, coupled with low recency, making them exceptionally valuable. To express our appreciation and foster loyalty, special incentives and rewards are reserved for these esteemed customers. Platinum Group (19.01% customers) generate 65.9% percent of our revenue.
* Our Gold-tier customers showcase strong loyalty to our business, consistently making frequent purchases. In acknowledgment of their commitment, they are eligible for exclusive discounts on their item purchases. Gold Group (40.7% customers) generate 25.6% of our revenue.
* The Silver-tier customers, characterized by infrequent purchasing behavior,predominantly consist of small-scale business owners.Introduce a loyalty program that rewards them for each purchase, encouraging repeat business. Silver Group (31.3% customers) generate 7.8% of our revenue
* The Bronze-tier customers have shown a higher likelihood of churning.To proactively address this situation, the marketing department can offer enticing and personalized incentives to retain this group of customers. Implementing targeted campaigns with exclusive and lucrative offers can significantly contribute to retaining their loyalty and preventing churn. Bronze Group (8.89% customers) generate 0.7% of our revenue.

Further the aim is to mine deeper insights by carrying out k-means and Principal Component Analysis (PCA) to form segments of customers.
Before performing k-means it is required that the data should be distributed normally. However, the RFM features are skewed. 
All features are projected on logarithmic scale to ensure near normal distribution.
Co-relation plot of RFM and logarithmic RFM features:
![image](https://github.com/neelpdesai/Retail-Market-Basket-Analysis-and-Customer-Churn-Prediction/assets/137664550/aa6a6b71-c577-4565-abd4-4c1a9ddeeedb)
* Frequency is highly correlated with both Monetary and Recency. The similar trend is observed on log scale.

Therefore, it can be infered that the variations observed in the Frequency feature may be elucidated by Recency and Monetary variables. To validate this, it is imperative to conduct Principal Component Analysis (PCA) to explore potential latent insights that may provide a deeper understanding

![image](https://github.com/neelpdesai/Retail-Market-Basket-Analysis-and-Customer-Churn-Prediction/assets/137664550/fa62485b-93f8-4c3e-b6a1-6872435be502)

Graph shows that if we limit number of Principal Components to 2 (i.e PC1 and PC2) then we would be able to explain over 90% of varaince. Hence we limit number of principal components to 2.

After reducing dimensionality, k-means clustering is performed over PC1 and PC2.

Elbow method shows that optimal number of clusters is 2.

![image](https://github.com/neelpdesai/Retail-Market-Basket-Analysis-and-Customer-Churn-Prediction/assets/137664550/602e3f6e-d0cf-4301-8dc7-2a459504e875)

There are 2 major groups of customers based on their RFM behaviour.

On calulating the percentage revenue generate by both the groups following conclusion can be drawn out:
![image](https://github.com/neelpdesai/Retail-Market-Basket-Analysis-and-Customer-Churn-Prediction/assets/137664550/a7e0a3ae-9640-497a-92e4-2e3ea5b2324c)

* Clustering yields two customer groups, with Cluster Group 2 contributing approximately 87.97% of the total revenue. These customers are loyal customers.These customers are deemed crucial, and offering tailored loyalty incentives is recommended to ensure their retention. In contrast, Cluster Group 1 generates a modest 12.03% of the revenue.There customers are infrequent customers.
